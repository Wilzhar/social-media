{% extends "base.html" %} {% block title %} Home Page {% endblock %}
{% block content %}
<div class="bg-[#FFFBF5] px-2 pb-2">
  {% load static %}
  <div class="h-16 bg-[#7743DB] w-100 sticky top-0 flex items-center justify-start h-10 p-2 text-white">
    <img src="https://picsum.photos/200" alt="img" class="w-10 h-10 mr-2 bg-white rounded-full" />
    {% if chat.user_1_id == user.id %}
    <h1>{{ chat.user_2.username }}</h1>
    {% else %}
    <h1>{{ chat.user_1.username }}</h1>
    {% endif %}
  </div>

  <ul id="chat-log">
    {% for message in messages %}
    {% if user.id == message.user_id %}
    <li class="bg-[#7743DB] text-white my-2 p-2 w-3/5 ml-auto mr-0">
      {{ message.text }}
    </li>
    {% else %}
    <li class="bg-[#C3ACD0] text-white my-2 p-2 w-3/5 ml-0 mr-auto">
      {{ message.text }}
    </li>
    {% endif %}
    {% endfor %}
  </ul>

  {% csrf_token %}
  <input id="chat-message-input" type="text" size="100"><br>
  <input id="chat-message-submit" type="button" value="Send">

  {{ chat_id|json_script:"chat-id" }}
  {{ request.user.id|json_script:"user-id" }}

  <script src="{% static 'js/chat_socket.js' %}"></script>
</div>
{% endblock %}
